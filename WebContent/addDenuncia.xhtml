<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:m="http://code.google.com/p/gmaps4jsf/">

<ui:composition template="/WEB-INF/templates/padrao.xhtml">
	<ui:define name="title">
	    Fui Roubado
	</ui:define>
	<div id="header">
	
		<ui:define name="content">
		<div class="containt-fluid-fundo">
		<div class="col-md-6">
			<script type="text/javascript"
			src="https://maps.googleapis.com/maps/api/js?sensor=true">
    </script>
		<h:form id="form">
			<m:map width="400px" height="700px"
				jsVariable="map1" zoom="4" address="BR">
				<m:marker address="Florianopolis, BR" jsVariable="marker1"
					draggable="true">
					<m:eventListener eventName="dragend"
						jsFunction="marker1DragHandler" />
				</m:marker>
			</m:map>
			
			<h:inputHidden id="idLat" value="#{localMB.latitude}" />
			<h:inputHidden id="idLon" value="#{localMB.longitude}" />
			<h:commandButton value="Save as a favorite place!!!"
				action="#{localMB.save()}" />
			<br />
			<h:outputText
				value="First place (lat, lng): (#{localMB.latitude}, #{localMB.longitude})" />
			<br />
			<script type="text/javascript">
               function marker1DragHandler(event) {
            	   document.getElementById('form:idLat').value = event.latLng.A;
            	   document.getElementById('form:idLon').value = event.latLng.F;
                   
            	   alert("Current marker1 latlng is: " +  document.getElementById('form:idLon').value);
               }
            </script>
           	
            </h:form>
            </div> 
             </div>	          
		</ui:define>
	</div>
	
</ui:composition>
</html>
